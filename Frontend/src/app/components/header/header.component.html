<header [ngClass]="{ 'scrolled': isScrolled }"
    class="fixed left-0 right-0 z-50 flex items-center justify-between h-24 px-4 md:px-6">

    <div class="rounded-full menu-bg p-2 h-[40px] w-[40px] order-1 md:order-2 z-100">
        <app-primary-button icon="menu" class="h-[24px]" (click)="toggleMobileMenu()"></app-primary-button>
    </div>

    <button class="flex items-center cursor-pointer order-2 md:order-1 z-100" (click)="router.navigate(['/'])">
        <span class="text-2xl font-extrabold bg-primary-neon">
            OnTime
        </span>
    </button>

    @if(!authService.token()){
    <app-primary-button class="order-3 z-100" icon="login" routerLink="/login"
        (btnClick)="closeMobileMenu()"></app-primary-button>
    }
    @else {
    <div class="flex order-3 z-100">
        <div>
            {{authService.getName()}}
        </div>
        <app-primary-button icon="account_circle" routerLink="/profile"></app-primary-button>
    </div>
    }
    <div class="fixed inset-0 backdrop-blur-xs z-40 flex flex-col items-center justify-center " *ngIf="isMobileMenuOpen"
        (click)="closeMobileMenu()">

        <div class="flex flex-col py-12 px-16 gap-3" (click)="$event.stopPropagation()">
            @if(authService.token()) {
            <app-primary-button label="lineup" routerLink="/lineup" (btnClick)="closeMobileMenu()"></app-primary-button>
            <app-primary-button label="My Festivals" routerLink="/my-festivals"
                (btnClick)="closeMobileMenu()"></app-primary-button>
            }
            @if (authService.hasRequiredRoles(["ORGANIZER", "ADMIN"])) {
            <app-primary-button label="Festivals" routerLink="/festivals-admin"
                (btnClick)="closeMobileMenu()"></app-primary-button>
            <app-primary-button label="Artists" routerLink="/artists-admin"
                (btnClick)="closeMobileMenu()"></app-primary-button>
            }
            @if (authService.token()) {
            <app-primary-button icon="local_activity" routerLink="/tickets"
                (btnClick)="closeMobileMenu()"></app-primary-button>
            <app-primary-button (btnClick)="logout(); closeMobileMenu()" icon="logout"></app-primary-button>
            }
        </div>
    </div>
</header>